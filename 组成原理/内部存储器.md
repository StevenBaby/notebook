# 内部存储器

半导体随机存取存储器的两种基本形式时动态 RAM(DRAM) 和静态RAM(SRAM)。SRAM比DRAM存取速度块、价格更昂贵，并且集成度较低，一般用于 cache 存储器。而 DRAM 则一般用于主存储器。

存储器系统中通常都有纠错技术，这包括添加一些与原数据位成函数关系的冗余位来构成纠错码。如果出现错误位，纠错码会检测并通常能纠正该错误位。

为了补偿DRAM相对较低的速度，现已推出几种先进的DRAM组织。使用最普遍的两种时同步DRAM和总线式DRAM。两者都使用系统时钟以支持数据块传送。

## 半导体主存储器

在早期的计算机中，主存储器中的随机存取存储器最通用的形式是使用一组环形的铁磁体圈，称为磁芯。因此主存储器通常称为核心，这一技术沿用至今。目前几乎所有的主存储器都采用半导体芯片。

### 5.1.1 组织

半导体存储器的基本元件是存储位元。虽然电子技术不同，但半导体存储器又一些共同的性质：

- 呈现两种稳态（或半稳态），分别表示二进制的1和0
- 能够写入信息（至少一次）来设置状态
- 能够读出状态信息

每个位元又三个能传输电信号的功能端口

- select 端口用于读或写操作原则一个存储位元
- control 端口知名操作时读还是写
- data-in 提供设置状态为1或0的电信号

对于读操作

- sense 感应端口用于输出位元的状态

### DRAM 和 SRAM

**随机存取**：即通过编排的寻址逻辑，存储器的单个字直接被存取

**RAM(random access memory)**的明显特征是，可以方便快捷地读取数据和写入数据，且读写操作都是通过电信号来完成的。另一个明显特征是 **易失性**。RAM必须持续供电，一旦断电，数据就会丢失。因此RAM仅用于暂时存储。两种传统的RAM形式时DRAM和SRAM。

RAM技术分为两种

- DRAM(dynamic RAM)：利用电容充电来存储数据，位元中的电容 有/无 电荷分别代表1或0.因为电容器有漏电的自然趋势，因此动态RAM需要周期地充电刷新来维持数据的状态。动态一词就是指这种存储电荷丢失的趋势，即使电源一直在供电。

典型的DRAM结构，当要读出或写入该位元的位值时，激励地址线。晶体管像开关一样的工作。

对于写操作，一个电压信号施加到位线上，高电压代表1，低电压代表0，然后一个信号加到地址线，允许电荷传输到电容器。

对于读操作，存储在电容上的电荷被送出到**位线**和**读出放大器**，读出放大器将此电容电压与以参考值进行比较，并确定位元保存的时逻辑1还是逻辑0，位元的读出放掉了电容上的电荷，必须重新写入才能算完成本次操作。

- SRAM(static RAM)：是一个数字设备，它使用与处理器相同的逻辑元件。静态RAM采用传统的触发器，逻辑门配置来存储二进制值。只要电源不断，SRAM将一直保持它所存储的数据。

SRAM 与 DRAM 对比

静态与动态RAM都是易失的，二者要求电源持续供电才能保存值，动态存储器位元更小，而且电路简单。因此与SRAM相比，DRAM的密度要高。且价格便宜。另一方面，DRAM要求有支持刷新的电路。但是对于较大容量的存储器，DRAM位元较低的可变成本足以补偿刷新电路的固定成本。因此，DRAM更趋向于满足大容量存储器的需求。通常SRAM要比DRAM快。由于相对特征，SRAM一般用于cache 存储器，而DRAM则用于主存储器。

### ROM 类型

顾名思义，**只读存储器(read-only memory ROM)** 含有不能改变的永久性数据。ROM是非易失性存储器，即存储器中的数据并不要求供电来维持。ROM可读，但不能写入新数据。ROM的一个重要应用时微程序设计。

制造ROM同制造其他集成电路芯片是一样的，在制造过程中把数据固化到芯片上。这存在两个问题：

- 固话数据需要较大的固定成本，不论是制造一片还是复制上千片特殊的ROM
- 无出错处理机会，一旦某一位出错，则整批的ROM芯片报废

当只需要少量的特定内容的ROM芯片时，可以选择较廉价的可编程ROM(programmable ROM PROM)，和ROM一样，PROM是非易失性的，它只能写入一次数据。对于PROM，写过程是用电信号执行。

除此以外 还有 EPROM、EEPROM、Flash

### 多体交叉存储器

主存储器由多块DRAM芯片组成，大量的芯片能组合形成**存储体**，可以将多个存储体组织成多体交叉存储器。每一个存储体可以独立提供存储器的读写服务，因此，一个包含K个存储体的系统能够同事满足K个存储需求，是存储器的读写速度增加到原来的K倍。如果一个存储器的一系列连续字存放在不同的存储体中，则传输一个内存块的速度回明显加快。

## 纠错

半导体存储系统会出现差错，差错可分为：

- 硬故障：是永久性的物理故障，以至于受影响的存储单元不能可靠地存储数据。
- 软差错：是随机非破坏性事件，它改变了某个或某些存储单元的内容，但没有损坏存储器。软差错可以由电源问题或α粒子引起，这些粒子起因于放射性衰减，他们非常普遍，因为几乎所有材料中都有放射性物质。硬故障和软差错显然都不受欢迎，因此，有了纠错逻辑。

最简单的纠错码是**汉明码**，它由贝尔实验室的理查德·汉明发明。

纠错码以增加复杂性位代价来提高存储器的可靠性。

## 高级DRAM组织

使用高性能处理器时，最严重的系统瓶颈之一时处理器与内部主存储器的接口。该接口时整个计算机中最重要的路径。

解决DRAM主存储器性能的一种方法时，在DRAM主存储器和处理器之间插入一级或者多级告诉 SRAM cache。但是SRAM比DRAM贵的多。

高级DRAM

- 同步DRAM(sychronous DRAM, SDRAM)：它与处理器的数据交换同步于外部的时钟信号。

- DDR-DRAM：

- RDRAM：

- CDRAM：

## 参考资料

- [1] 计算机组成与体系结构 [美] William Stallings 著
