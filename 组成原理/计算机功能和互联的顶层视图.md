# 计算机功能和互连的顶层视图

**指令周期：**

- 首先取指令
- 取零个或多个操作数
- 存零个或多个操作数
- 中断检查

计算机系统的主要部件（处理器、主存、I/O模块）为了交换数据和控制信号，需要进行互联。最流行的互联方式是使用多条线组成的共享系统总线。在当今系统中，通常采用层次式总线来改善性能。

总线的设计要素包括：**仲裁**（以集中式或分布式控制来裁决是否允许把信号发送到总线上）、**时序**（总线上的信号是与中央时钟同步，还是基于最近传送事件的异步传送）和 **宽度**（地址线条数和数据线条数）

在顶层，我们可以通过两种方法来描述计算机：

- 描述每个部件的外部操作，即它与其他部件之间交换的数据和控制信号
- 描述互连结构和管理互连结构所需要的控制

## 计算机的部件

**冯·诺伊曼结构：**

- 数据和指令存储的单一的 “读写存储器”中
- 存储器的内容通过位置寻址，而不关心存储在其中的数据类型
- 以顺序的形式从一条指令到下一条指令（除非有明确的修改）执行

硬布线程序

**指令解释器** 和 **通用算术逻辑功能模块** 组成了 **CPU**

CPU 一般使用两个内部寄存器：

- 存储器地址寄存器 (MAR)：为下一次读或者写提供存储器的地址
- 存储器缓冲寄存器 (MBR): 容纳写到内存或从内存接收的数据

类似的：

- I/O地址寄存器 (I/O AR)：指定了一个特定的I/O设备
- I/O缓冲寄存器 (I/O BR)：用于I/O模块与CPU之间的数据交换

- 程序计数器 (PC)：保存下一条将要读取指令的地址
- 指令寄存器 (IR)：读取的指令装入指令寄存器

## 计算机的功能

- 指令周期
- 取指周期
- 执行周期

指令的处理由两个步骤组成:

- 取指令
- 执行指令

指令要求的操作，总体来说，归为四类：

- **处理器-存储器**：数据可以从处理起传送到存储器或从存储器传送到处理器
- **处理器-I/O**：通过处理器和I/O模块之间的传输，数据可以送到或来自外部设备
- **数据处理**：处理器可以对数据执行一些算术或逻辑操作
- **控制**：指令可以改变执行顺序

几乎所有计算机都提供一种机制，其他模块(I/O或存储器)通过此机制可以中断处理器的正常处理。

| 终端类型 | 产生的原因 |
| - | - |
| 程序 | 由只能结果伴随而出现的某些条件产生，例如，算术溢出、除零、越界访问 |
| 定时器 | 由处理器的定时器产生，它允许操作系统以规整的时间间隔执行特定的功能 |
| I/O | 由 I/O 控制器产生，以通知操作的正常完成或各种出错情况 |
| 硬件故障 | 由电源故障或存储器奇偶校验出错这类的故障产生 |

